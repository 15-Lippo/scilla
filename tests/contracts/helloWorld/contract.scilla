(* This contract implements a simple HelloWorld contract.*)


(***************************************************)
(*               Associated library                *)
(***************************************************)
library HelloWorld

let one_msg = 
  fun (msg : Message) => 
  let nil_msg = Nil {Message} in
  Cons {Message} msg nil_msg

let not_owner_code  = 1

(***************************************************)
(*             The contract definition             *)
(***************************************************)

contract HelloWorld
(owner: Address)

field msgstr : String = "HelloWorld"

transition SayHello ()
	is_owner = builtin eq owner _sender;
  	match is_owner with
  	| False => 
 	  msg  = {_tag : Main; _recipient : _sender; _amount : 0; 
              code : not_owner_code};
      msgs = one_msg msg;
      send msgs
	| True =>
	  greet <- msgstr;
      msg = {_tag : Main; _recipient : _sender; _amount : 0; welcome_msg : greet};
      msgs = one_msg msg;
      send msgs
    end
end 


